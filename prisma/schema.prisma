generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

model user {
  id                      Int          @id @default(autoincrement())
  username                String?      @unique @db.VarChar(100)
  email                   String       @unique @db.VarChar(100)
  password                String       @db.Text
  service                 Json
  avatar                  String?      @db.Text
  friendship_UserToFriend friendship[] @relation("friendship_userTouser")
  friendship_FriendToUser friendship[] @relation("friendship_friendTouser")
}

model friendship {
  id                           Int    @id @default(autoincrement())
  user                         Int
  friend                       Int
  type                         String @db.VarChar(50)
  user_friendship_userTouser   user   @relation("friendship_userTouser", fields: [user], references: [id], onUpdate: Restrict, map: "friendship_ibfk_1")
  user_friendship_friendTouser user   @relation("friendship_friendTouser", fields: [friend], references: [id], onUpdate: Restrict, map: "friendship_ibfk_2")

  @@index([friend], map: "friend")
  @@index([user], map: "user")
}
